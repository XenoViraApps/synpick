version: '3.8'

services:
  synpick-test:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: synpick-test
    volumes:
      - ./logs:/home/testuser/logs
      - ./test-results:/home/testuser/test-results
    environment:
      - NODE_ENV=testing
      - VERBOSE=true
      - DEBUG=synpick:*
    stdin_open: true
    tty: true
    entrypoint: ["/bin/bash"]
    command: ["-c", "tail -f /dev/null"]
    networks:
      - synpick-network

  synpick-test-alpine:
    build:
      context: .
      dockerfile: Dockerfile.alpine
    container_name: synpick-test-alpine
    volumes:
      - ./logs:/home/testuser/logs
      - ./test-results:/home/testuser/test-results
    environment:
      - NODE_ENV=testing
      - VERBOSE=true
      - DEBUG=synpick:*
    stdin_open: true
    tty: true
    entrypoint: ["/bin/sh"]
    command: ["-c", "tail -f /dev/null"]
    networks:
      - synpick-network

networks:
  synpick-network:
    driver: bridge

volumes:
  logs:
  test-results:
